<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Student Data</title>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.7/handlebars.min.js"></script>
<style>
    table {
        border-collapse: collapse;
        width: 100%;
    }
    th, td {
        border: 1px solid #dddddd;
        text-align: left;
        padding: 8px;
    }
    th {
        background-color: #f2f2f2;
    }
</style>
</head>
<body>
    <h1>Select a Major</h1>
    <button id="citButton">CIT Majors</button>
    <button id="busButton">Business Majors</button>
    <p id="filterText">We filter our dataset by major.</p>
    <div id="studentData"></div>

    <script id="student-template" type="text/x-handlebars-template">
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Major</th>
                    <th>Midterm</th>
                    <th>Final</th>
                </tr>
            </thead>
            <tbody>
                {{#each students}}
                <tr>
                    <td>{{name}}</td>
                    <td>{{major}}</td>
                    <td>{{midterm}}</td>
                    <td>{{final}}</td>
                </tr>
                {{/each}}
            </tbody>
        </table>
    </script>

    <script>
        $(document).ready(function () {
            $.ajax({
                url: 'cit5students.json',
                dataType: 'json',
                success: function (data) {
                    renderData(data);
                }
            });

            function renderData(data) {
                var source = $('#student-template').html();
                var template = Handlebars.compile(source);
                
                $('#citButton').click(function () {
                    var citStudents = data.filter(function (student) {
                        return student.major === 'CIT';
                    });
                    var html = template({ students: citStudents });
                    $('#studentData').html(html);
                    $('#filterText').text('Displaying CIT Majors');
                });

                $('#busButton').click(function () {
                    var busStudents = data.filter(function (student) {
                        return student.major === 'BUS';
                    });
                    var html = template({ students: busStudents });
                    $('#studentData').html(html);
                    $('#filterText').text('Displaying Business Majors');
                });
            }
        });
    </script>
</body>
</html>
